/* 文章内容样式 - MDX 渲染优化 
   这是 Tailwind Typography 插件的基础类
   用于为 Markdown/MDX 内容提供优雅的排版样式 
*/
.prose {
  color: hsl(var(--foreground));    /* 使用主题色彩变量 */
  max-width: none;                  /* 移除默认最大宽度限制 */
  line-height: 1.75;                /* 优化行高，提升可读性 */
  font-size: 1rem;                  /* 基础字体大小 */
}

/* 标题样式系统 - 建立清晰的视觉层级 */
.prose h1 {
  color: hsl(var(--foreground));
  font-weight: 800;                 /* 超粗字重，突出重要性 */
  font-size: 2.25rem;               /* 36px - 主标题大小 */
  margin-top: 0;                    /* 文档开始不需要上边距 */
  margin-bottom: 1rem;              /* 与下方内容保持距离 */
  line-height: 1.2;                 /* 较紧的行高，避免标题过高 */
  letter-spacing: -0.025em;         /* 负字间距，让大标题更紧凑 */
  scroll-margin-top: 4rem;          /* 锚点跳转时的偏移量，避免被固定头部遮挡 */
}

.prose h2 {
  color: hsl(var(--foreground));
  font-weight: 700;                 /* 粗字重 */
  font-size: 1.875rem;              /* 30px - 二级标题 */
  margin-top: 2rem;                 /* 与上方内容保持较大距离，分割段落 */
  margin-bottom: 1rem;
  line-height: 1.3;
  letter-spacing: -0.025em;
  scroll-margin-top: 4rem;          /* 锚点跳转偏移 */
  border-bottom: 1px solid hsl(var(--border));  /* 下划线，增强视觉分割 */
  padding-bottom: 0.5rem;           /* 下划线与文字的间距 */
}

.prose h3 {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 1.5rem;
  margin-top: 1.75rem;
  margin-bottom: 0.75rem;
  line-height: 1.4;
  scroll-margin-top: 4rem;
}

.prose h4 {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 1.25rem;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  line-height: 1.5;
  scroll-margin-top: 4rem;
}

.prose h5,
.prose h6 {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 1.125rem;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
  line-height: 1.6;
  scroll-margin-top: 4rem;
}

/* 段落和文本样式 */
.prose p {
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
  line-height: 1.75;
}

.prose p:first-child {
  margin-top: 0;
}

.prose p:last-child {
  margin-bottom: 0;
}

/* 链接样式 - 现代化的链接交互设计 */
.prose a {
  color: hsl(var(--primary));       /* 使用主题色 */
  text-decoration: none;            /* 移除默认下划线 */
  font-weight: 500;                 /* 中等字重，突出链接 */
  border-bottom: 1px solid transparent;  /* 透明下划线，为悬停效果预留空间 */
  transition: all var(--animation-duration-fast) var(--animation-ease);  /* 平滑过渡动画 */
}

.prose a:hover {
  color: hsl(var(--primary));       /* 保持颜色一致 */
  border-bottom-color: hsl(var(--primary));  /* 悬停时显示下划线 */
}

.prose a:focus-visible {
  outline: 2px solid hsl(var(--ring));   /* 无障碍访问：键盘焦点指示器 */
  outline-offset: 2px;                   /* 焦点轮廓与元素的距离 */
  border-radius: 0.125rem;               /* 圆角焦点轮廓 */
}

/* 列表样式 */
.prose ul,
.prose ol {
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
  padding-left: 1.5rem;
}

.prose ul {
  list-style-type: disc;
}

.prose ol {
  list-style-type: decimal;
}

.prose li {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  line-height: 1.75;
}

.prose ul ul,
.prose ul ol,
.prose ol ul,
.prose ol ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.prose ul > li {
  position: relative;
}

.prose ul > li::marker {
  color: hsl(var(--muted-foreground));
}

.prose ol > li::marker {
  color: hsl(var(--muted-foreground));
  font-weight: 500;
}

/* 引用样式 - 现代化的引用块设计 */
.prose blockquote {
  font-weight: 500;                 /* 中等字重 */
  font-style: italic;               /* 斜体强调引用性质 */
  color: hsl(var(--muted-foreground)); /* 较淡的文字颜色 */
  border-left: 4px solid hsl(var(--border)); /* 左侧粗边框，经典引用样式 */
  margin: 1.5rem 0;                 /* 上下边距 */
  padding-left: 1.5rem;             /* 左内边距，与边框保持距离 */
  quotes: '"' '"' "'" "'";            /* 定义引号样式 */
  background: hsl(var(--muted) / 0.3); /* 半透明背景 */
  border-radius: 0 var(--radius-md) var(--radius-md) 0; /* 右侧圆角 */
  padding: 1rem 1.5rem;             /* 内边距，覆盖之前的 padding-left */
}

.prose blockquote p:first-of-type::before {
  content: open-quote;              /* 在第一段前添加开引号 */
}

.prose blockquote p:last-of-type::after {
  content: close-quote;             /* 在最后一段后添加闭引号 */
}

/* 代码样式 */
.prose code {
  color: hsl(var(--foreground));
  font-weight: 600;
  font-size: 0.875rem;
  font-family: var(--font-geist-mono);
  background: hsl(var(--muted));
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-sm);
  border: 1px solid hsl(var(--border));
}

.prose code::before,
.prose code::after {
  content: none;
}

.prose pre {
  color: hsl(var(--foreground));
  background: hsl(var(--muted));
  overflow-x: auto;
  font-weight: 400;
  font-size: 0.875rem;
  line-height: 1.7;
  margin: 1.5rem 0;
  padding: 1.5rem;
  border-radius: var(--radius-lg);
  border: 1px solid hsl(var(--border));
}

.prose pre code {
  background: transparent;
  border: none;
  padding: 0;
  font-weight: inherit;
  color: inherit;
  font-size: inherit;
  font-family: inherit;
  line-height: inherit;
}

/* 表格样式 */
.prose table {
  width: 100%;
  table-layout: auto;
  text-align: left;
  margin: 2rem 0;
  font-size: 0.875rem;
  line-height: 1.7;
  border-collapse: collapse;
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-md);
  overflow: hidden;
}

.prose thead {
  background: hsl(var(--muted));
}

.prose thead th {
  color: hsl(var(--foreground));
  font-weight: 600;
  vertical-align: bottom;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid hsl(var(--border));
}

.prose tbody tr {
  border-bottom: 1px solid hsl(var(--border));
}

.prose tbody tr:last-child {
  border-bottom: none;
}

.prose tbody tr:nth-child(even) {
  background: hsl(var(--muted) / 0.3);
}

.prose tbody td {
  vertical-align: baseline;
  padding: 0.75rem 1rem;
}

/* 图片和媒体样式 */
.prose img {
  margin: 2rem 0;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  max-width: 100%;
  height: auto;
}

.prose video {
  margin: 2rem 0;
  border-radius: var(--radius-lg);
  max-width: 100%;
  height: auto;
}

.prose figure {
  margin: 2rem 0;
}

.prose figcaption {
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
  line-height: 1.6;
  margin-top: 0.75rem;
  text-align: center;
  font-style: italic;
}

/* 分隔线样式 */
.prose hr {
  border: none;
  height: 1px;
  background: hsl(var(--border));
  margin: 3rem 0;
  position: relative;
}

.prose hr::before {
  content: "***";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: hsl(var(--background));
  color: hsl(var(--muted-foreground));
  padding: 0 1rem;
  font-size: 1.5rem;
  letter-spacing: 0.5rem;
}

/* 强调和内联样式 */
.prose strong {
  color: hsl(var(--foreground));
  font-weight: 700;
}

.prose em {
  color: hsl(var(--foreground));
  font-style: italic;
}

.prose mark {
  background: hsl(var(--primary) / 0.2);
  color: hsl(var(--foreground));
  padding: 0.125rem 0.25rem;
  border-radius: var(--radius-sm);
}

.prose small {
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
}

.prose sub,
.prose sup {
  font-size: 0.75rem;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

.prose sub {
  bottom: -0.25em;
}

.prose sup {
  top: -0.5em;
}

/* 键盘按键样式 */
.prose kbd {
  font-family: var(--font-geist-mono);
  font-size: 0.875rem;
  color: hsl(var(--foreground));
  background: hsl(var(--muted));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-sm);
  padding: 0.125rem 0.375rem;
  box-shadow: 0 1px 0 hsl(var(--border));
}

/* 响应式优化 */
@media (max-width: 768px) {
  .prose {
    font-size: 0.875rem;
  }
  
  .prose h1 {
    font-size: 1.875rem;
  }
  
  .prose h2 {
    font-size: 1.5rem;
  }
  
  .prose h3 {
    font-size: 1.25rem;
  }
  
  .prose pre {
    padding: 1rem;
    margin: 1rem -1rem;
    border-radius: 0;
    border-left: none;
    border-right: none;
  }
  
  .prose table {
    font-size: 0.75rem;
  }
  
  .prose tbody td,
  .prose thead th {
    padding: 0.5rem 0.75rem;
  }
}

/* 阅读进度指示器样式
   功能：显示文章阅读进度，提升用户体验
   原理：通过 JavaScript 计算滚动位置，动态更新进度条宽度
*/
.reading-progress {
  position: fixed;                  /* 固定定位，不随页面滚动 */
  top: 0;                          /* 位于页面顶部 */
  left: 0;
  width: 100%;                     /* 占满全屏宽度 */
  height: 3px;                     /* 较细的进度条，不干扰阅读 */
  background: hsl(var(--muted));   /* 背景色，进度条的轨道 */
  z-index: 50;                     /* 高层级，显示在其他内容之上 */
  pointer-events: none;            /* 不阻挡鼠标事件，允许点击下方内容 */
}

.reading-progress-bar {
  height: 100%;                    /* 填满容器高度 */
  background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--chart-1))); /* 渐变色彩，更加美观 */
  width: 0%;                       /* 初始宽度为 0，通过 JS 动态更新 */
  transition: width 0.1s ease-out; /* 平滑的宽度变化动画 */
  box-shadow: 0 0 8px hsl(var(--primary) / 0.3); /* 发光效果，增强视觉效果 */
}

/* 进度条动画效果 - 可选的脉冲动画 */
@keyframes progress-pulse {
  0%, 100% { opacity: 1; }         /* 开始和结束时完全不透明 */
  50% { opacity: 0.8; }            /* 中间时刻轻微透明 */
}

.reading-progress-bar.pulse {
  animation: progress-pulse 2s infinite; /* 应用脉冲动画，2秒循环 */
}

/* 响应式适配 */
@media (max-width: 768px) {
  .reading-progress {
    height: 2px;
  }
  
  .reading-progress-bar {
    box-shadow: 0 0 4px hsl(var(--primary) / 0.3);
  }
}

/* 打印时隐藏 */
@media print {
  .reading-progress {
    display: none !important;
  }
}

/* 文章目录（TOC）集成样式
   功能：为长文章提供导航目录，提升阅读体验
   特性：响应式设计、激活状态、平滑滚动
*/
.table-of-contents {
  background: hsl(var(--muted) / 0.5);  /* 半透明背景，与内容区分 */
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-lg);      /* 大圆角，现代化外观 */
  padding: 1.5rem;
  margin: 2rem 0;
  position: sticky;                     /* 粘性定位，滚动时保持可见 */
  top: 5rem;                           /* 距离顶部的距离，避免被头部导航遮挡 */
  max-height: calc(100vh - 8rem);      /* 最大高度，避免超出视窗 */
  overflow-y: auto;                    /* 垂直滚动，处理超长目录 */
}

.table-of-contents-title {
  font-size: 1.125rem;             /* 稍大的标题字体 */
  font-weight: 600;                /* 半粗字体 */
  color: hsl(var(--foreground));
  margin: 0 0 1rem 0;              /* 下边距，与目录列表分开 */
  padding-bottom: 0.5rem;
  border-bottom: 1px solid hsl(var(--border)); /* 下划线分割 */
}

.table-of-contents ul {
  list-style: none;                /* 移除默认列表样式 */
  padding: 0;                      /* 移除默认内边距 */
  margin: 0;                       /* 移除默认外边距 */
}

.table-of-contents li {
  margin: 0;
  padding: 0;
}

.table-of-contents a {
  display: block;                  /* 块级元素，方便点击 */
  padding: 0.5rem 0;              /* 上下内边距，增大点击区域 */
  color: hsl(var(--muted-foreground)); /* 较淡的文字颜色 */
  text-decoration: none;           /* 移除下划线 */
  border-bottom: none;             /* 确保没有下划线 */
  border-left: 2px solid transparent; /* 透明左边框，为激活状态预留空间 */
  padding-left: 0.75rem;           /* 左内边距 */
  font-size: 0.875rem;             /* 较小的字体 */
  line-height: 1.4;                /* 紧凑的行高 */
  transition: all var(--animation-duration-fast) var(--animation-ease); /* 平滑过渡 */
}

.table-of-contents a:hover {
  color: hsl(var(--foreground));   /* 悬停时加深颜色 */
  background: hsl(var(--muted) / 0.5); /* 半透明背景高亮 */
  border-left-color: hsl(var(--primary)); /* 左边框变为主题色 */
}

.table-of-contents a.active {
  color: hsl(var(--primary));      /* 激活状态使用主题色 */
  background: hsl(var(--primary) / 0.1); /* 主题色的淡背景 */
  border-left-color: hsl(var(--primary)); /* 主题色左边框 */
  font-weight: 500;                /* 加粗字体，突出当前位置 */
}

/* 嵌套层级样式 - 体现标题的层级结构 */
.table-of-contents ul ul a {
  padding-left: 1.5rem;           /* 二级标题的缩进 */
  font-size: 0.8rem;              /* 更小的字体 */
}

.table-of-contents ul ul ul a {
  padding-left: 2.25rem;          /* 三级标题的更大缩进 */
  font-size: 0.75rem;             /* 最小的字体 */
}

/* 平滑滚动定位 - 点击目录项时的滚动效果 */
html {
  scroll-behavior: smooth;         /* 平滑滚动，而非瞬间跳转 */
  scroll-padding-top: 4rem;        /* 滚动停止位置的偏移，避免被固定头部遮挡 */
}

/* 移动端收起/展开 */
@media (max-width: 768px) {
  .table-of-contents {
    position: relative;
    top: auto;
    max-height: none;
    margin: 1rem 0;
  }
  
  .table-of-contents-mobile {
    position: relative;
  }
  
  .table-of-contents-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 0.75rem;
    background: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius-md);
    cursor: pointer;
    margin-bottom: 1rem;
  }
  
  .table-of-contents-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height var(--animation-duration-normal) var(--animation-ease);
  }
  
  .table-of-contents-content.expanded {
    max-height: 500px;
  }
  
  .table-of-contents-icon {
    transition: transform var(--animation-duration-fast) var(--animation-ease);
  }
  
  .table-of-contents-toggle.expanded .table-of-contents-icon {
    transform: rotate(180deg);
  }
}

/* 桌面端侧边栏样式 */
@media (min-width: 1200px) {
  .article-layout {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 3rem;
    align-items: start;
  }
  
  .table-of-contents {
    margin: 0;
    position: sticky;
    top: 2rem;
  }
}

/* 滚动条样式 */
.table-of-contents::-webkit-scrollbar {
  width: 4px;
}

.table-of-contents::-webkit-scrollbar-track {
  background: transparent;
}

.table-of-contents::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: var(--radius-sm);
}

.table-of-contents::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* 增强代码块功能样式
   目标：为代码块提供现代化的交互功能
   功能：复制、行号、语言标识、折叠、全屏查看
*/

/* 代码块容器 - 主要的代码块包装器 */
.prose .code-block-container {
  position: relative;              /* 相对定位，为子元素的绝对定位提供参考 */
  margin: 1.5rem 0;               /* 上下边距，与其他内容分开 */
  border-radius: var(--radius-lg); /* 大圆角，现代化外观 */
  overflow: hidden;                /* 隐藏超出的内容，保持圆角 */
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted));   /* 背景色，与页面区分 */
}

/* 代码块头部 - 显示语言标识和工具按钮 */
.prose .code-block-header {
  display: flex;                   /* 弹性布局 */
  align-items: center;             /* 垂直居中 */
  justify-content: space-between;  /* 两端对齐：语言标识在左，工具按钮在右 */
  padding: 0.75rem 1rem;          /* 内边距 */
  background: hsl(var(--muted));   /* 背景色 */
  border-bottom: 1px solid hsl(var(--border)); /* 下边框，与代码区域分开 */
  font-size: 0.75rem;             /* 小字体 */
  color: hsl(var(--muted-foreground));
}

/* 代码语言标识 - 显示代码类型 */
.prose .code-language {
  font-family: var(--font-geist-mono); /* 等宽字体 */
  font-weight: 500;                /* 中等字重 */
  text-transform: uppercase;       /* 转为大写 */
  letter-spacing: 0.05em;          /* 字母间距 */
  color: hsl(var(--primary));      /* 主题色，突出显示 */
}

/* 代码块工具栏 - 包含复制、折叠、全屏等按钮 */
.prose .code-toolbar {
  display: flex;                
  gap: 0.5rem;                    
  align-items: center;             
}

/* 复制按钮样式 - 点击复制代码到剪贴板 */
.prose .code-copy-button {
  display: flex;
  align-items: center;
  gap: 0.25rem;                    /* 图标和文字间距 */
  padding: 0.25rem 0.5rem;        /* 内边距 */
  background: hsl(var(--background)); /* 背景色 */
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-sm);
  color: hsl(var(--muted-foreground));
  font-size: 0.75rem;
  cursor: pointer;                 /* 鼠标指针变为手指 */
  transition: all var(--animation-duration-fast) var(--animation-ease);
  opacity: 0;                      /* 初始隐藏，悬停时显示 */
}

.prose .code-block-container:hover .code-copy-button {
  opacity: 1;                      /* 悬停在代码块上时显示复制按钮 */
}

.prose .code-copy-button:hover {
  background: hsl(var(--primary)); /* 悬停时背景变为主题色 */
  color: hsl(var(--primary-foreground)); /* 悬停时文字颜色 */
  border-color: hsl(var(--primary));
}

.prose .code-copy-button.copied {
  background: hsl(var(--chart-2)); /* 复制成功后的状态颜色（绿色） */
  color: hsl(var(--primary-foreground));
  border-color: hsl(var(--chart-2));
}

/* 代码折叠/展开按钮 - 处理过长的代码块 */
.prose .code-collapse-button {
  padding: 0.25rem 0.5rem;
  background: transparent;         /* 透明背景 */
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-sm);
  color: hsl(var(--muted-foreground));
  font-size: 0.75rem;
  cursor: pointer;
  transition: all var(--animation-duration-fast) var(--animation-ease);
}

.prose .code-collapse-button:hover {
  background: hsl(var(--muted));
  color: hsl(var(--foreground));
}

/* 行号显示样式 - 为代码添加行号，方便引用和讨论 */
.prose .code-block-with-line-numbers {
  position: relative;              /* 为绝对定位的行号提供参考 */
}

.prose .code-line-numbers {
  position: absolute;              /* 绝对定位，不占据文档流空间 */
  top: 0;
  left: 0;
  width: 3rem;                     /* 固定宽度，容纳行号 */
  padding: 1.5rem 0;              /* 上下内边距，与代码对齐 */
  background: hsl(var(--muted) / 0.5); /* 半透明背景，与代码区分 */
  border-right: 1px solid hsl(var(--border)); /* 右边框分割 */
  font-family: var(--font-geist-mono); /* 等宽字体，保持对齐 */
  font-size: 0.75rem;
  line-height: 1.7;                /* 与代码行高一致 */
  color: hsl(var(--muted-foreground));
  pointer-events: none;            /* 不响应鼠标事件，避免干扰代码选择 */
}

.prose .code-line-numbers span {
  display: block;                  /* 块级元素，每个行号占一行 */
  text-align: right;               /* 右对齐，美观整齐 */
  padding-right: 0.75rem;         /* 右内边距，与边框保持距离 */
}

.prose .code-block-with-line-numbers pre {
  padding-left: 4rem;             /* 左内边距，为行号留出空间 */
}

/* 代码折叠功能 - 处理过长的代码块，提升阅读体验 */
.prose .code-block-collapsible {
  overflow: hidden;                /* 隐藏超出的内容 */
  transition: max-height var(--animation-duration-normal) var(--animation-ease); /* 平滑的高度变化动画 */
}

.prose .code-block-collapsed {
  max-height: 300px;              /* 折叠状态的最大高度 */
  position: relative;              /* 为伪元素提供参考 */
}

.prose .code-block-collapsed::after {
  content: '';                     /* 空内容的伪元素 */
  position: absolute;              /* 绝对定位在底部 */
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;                    /* 渐变遮罩高度 */
  background: linear-gradient(transparent, hsl(var(--muted))); /* 从透明到背景色的渐变 */
  pointer-events: none;            /* 不阻挡鼠标事件 */
}

.prose .code-block-expanded {
  max-height: none;
}

/* 全屏查看模式 */
.prose .code-fullscreen-button {
  padding: 0.25rem 0.5rem;
  background: transparent;
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-sm);
  color: hsl(var(--muted-foreground));
  font-size: 0.75rem;
  cursor: pointer;
  transition: all var(--animation-duration-fast) var(--animation-ease);
}

.prose .code-fullscreen-button:hover {
  background: hsl(var(--muted));
  color: hsl(var(--foreground));
}

/* 全屏模式样式 */
.code-fullscreen-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: hsl(var(--background) / 0.95);
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.code-fullscreen-container {
  width: 100%;
  max-width: 90vw;
  max-height: 90vh;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xl);
}

.code-fullscreen-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  background: hsl(var(--muted));
  border-bottom: 1px solid hsl(var(--border));
}

.code-fullscreen-close {
  padding: 0.5rem;
  background: transparent;
  border: none;
  color: hsl(var(--muted-foreground));
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all var(--animation-duration-fast) var(--animation-ease);
}

.code-fullscreen-close:hover {
  background: hsl(var(--destructive));
  color: hsl(var(--destructive-foreground));
}

.code-fullscreen-content {
  height: calc(90vh - 4rem);
  overflow: auto;
}

.code-fullscreen-content pre {
  margin: 0;
  height: 100%;
  border-radius: 0;
  border: none;
}

/* 响应式适配 */
@media (max-width: 768px) {
  .prose .code-block-header {
    padding: 0.5rem 0.75rem;
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .prose .code-toolbar {
    width: 100%;
    justify-content: flex-end;
  }
  
  .prose .code-copy-button {
    opacity: 1;
  }
  
  .prose .code-line-numbers {
    width: 2.5rem;
  }
  
  .prose .code-block-with-line-numbers pre {
    padding-left: 3rem;
  }
  
  .code-fullscreen-overlay {
    padding: 1rem;
  }
  
  .code-fullscreen-container {
    max-width: 95vw;
    max-height: 95vh;
  }
}

/* 无障碍访问优化 */
.prose .code-copy-button:focus-visible,
.prose .code-collapse-button:focus-visible,
.prose .code-fullscreen-button:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* 打印样式 */
@media print {
  .prose .code-toolbar,
  .prose .code-copy-button,
  .prose .code-collapse-button,
  .prose .code-fullscreen-button {
    display: none !important;
  }
  
  .prose .code-block-collapsed {
    max-height: none !important;
  }
  
  .prose .code-block-collapsed::after {
    display: none !important;
  }
}
